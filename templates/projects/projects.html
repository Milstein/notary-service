{% extends 'base.html' %}
{% load static %}

{% block title %}Infrastructure for Privacy-Assured CompuTations{% endblock %}

{% block content %}
    {% if user.is_authenticated %}
        <div class="container">
            <h1>Projects</h1>
            <p>
                Projects are created by their Principal Investigators (PIs) and define membership via roles registered
                within the ImPACT COmanage registry as well as Datasets as defined by data providers using
                Notary Service tools.
            </p>
            <h2>My Projects
                <a href="{% url 'project_new' %}" title="Create New Project" class="fa fa-fw fa-plus-square"></a>
            </h2>
            <table border="1px solid black" cellpadding="5px">
                <tr>
                    <td align="center"><b>Name</b></td>
                    <td align="center"><b>Validated</b></td>
                    <td align="center"><b>
                        {% if user.show_uuid %}
                            UUID
                        {% else %}
                            Description
                        {% endif %}
                    </b></td>
                    <td align="center"><b>Created Date</b></td>
                    <td align="center"><b>Modified Date</b></td>
                </tr>
                {% for project in projects %}
                    <tr>
                    <td>{{ project.name }}</td>
                    <td align="center">
                        {% if project.is_valid %}
                            <i class="fa fa-fw fa-check" style="color: green;"></i>
                        {% else %}
                            <i class="fa fa-fw fa-remove" style="color: red;"></i>
                        {% endif %}
                    </td>
                    <td style="font-family: Courier"><a href="{% url 'project_detail' uuid=project.uuid %}"
                                                        title="Project Details">
                        {% if user.show_uuid %}
                            {{ project.uuid }}
                        {% else %}
                            {{ project.description|slice:":34" }}..
                        {% endif %}
                    </a></td>
                    <td>{{ project.created_date|date:"m/d/Y g:i a" }}</td>
                    <td>{{ project.modified_date|date:"m/d/Y g:i a" }}</td>
                    <td><a href="{% url 'project_edit' uuid=project.uuid %}" title="Edit" class="fa fa-fw fa-edit"></a>
                    </td>
                {% endfor %}
            </table>
        </div>
    {% else %}
        <div class="container">
            <p>You are not currently logged in</p>
        </div>
    {% endif %}
{% endblock %}